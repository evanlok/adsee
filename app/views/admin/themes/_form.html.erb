<%= simple_form_for [:admin, @theme] do |f| %>
  <%= f.input :name %>
  <%= f.input :description, input_html: { rows: 4 } %>
  <%= f.input :duration, label: 'Duration (seconds)' %>
  <%= f.input :photo_count %>
  <%= f.association :song, include_blank: 'N/A' %>
  <%= render 'admin/shared/image_form_field', f: f, name: :thumbnail, version: :small %>
  <%= render 'admin/shared/image_form_field', f: f, name: :poster_image, version: :small, label_name: 'Poster image' %>

  <div class="form-group">
    <%= f.label :sample_video %>
    <%= f.file_field :sample_video %>

    <% if @theme.sample_video? %>
      <br>
      <%= link_to 'Download sample video', @theme.sample_video.url, target: '_blank' %>
    <% end %>

    <div class="checkbox">
      <label>
        <%= f.check_box :remove_sample_video %>
        Remove sample video
      </label>
    </div>
  </div>

  <h4>Scenes</h4>

  <ul id="scenes" class="sortable-scene-list list-unstyled">
    <%= f.simple_fields_for :theme_scenes do |theme_scene_fields| %>
      <%= render 'theme_scene_fields', f: theme_scene_fields %>
    <% end %>
  </ul>

  <div class="form-group">
    <%= link_to_add_association 'Add scene', f, :theme_scenes, class: 'btn btn-info', data: { 'association-insertion-node' => '#scenes', 'association-insertion-method' => 'append' } %>
  </div>

  <%= f.submit 'Save', class: 'btn btn-primary' %>
  <%= link_to 'Cancel', admin_themes_path, class: 'btn btn-default' %>
<% end %>
